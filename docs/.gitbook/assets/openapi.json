{"openapi":"3.0.3","info":{"title":"tycho-indexer","description":"","license":{"name":""},"version":"0.56.5"},"paths":{"/v1/contract_state":{"post":{"tags":["rpc"],"summary":"Retrieve contract states","description":"This endpoint retrieves the state of contracts within a specific execution environment. If no\ncontract ids are given, all contracts are returned. Note that `protocol_system` is not a filter;\nit's a way to specify the protocol system associated with the contracts requested and is used to\nensure that the correct extractor's block status is used when querying the database. If omitted,\nthe block status will be determined by a random extractor, which could be risky if the extractor\nis out of sync. Filtering by protocol system is not currently supported on this endpoint and\nshould be done client side.","operationId":"contract_state","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StateRequestBody"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StateRequestResponse"}}}}}}},"/v1/health":{"get":{"tags":["rpc"],"summary":"Health check endpoint","description":"This endpoint is used to check the health of the service.","operationId":"health","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Health"}}}}}}},"/v1/protocol_components":{"post":{"tags":["rpc"],"summary":"Retrieve protocol components","description":"This endpoint retrieves components within a specific execution environment, filtered by various\ncriteria.","operationId":"protocol_components","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolComponentsRequestBody"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolComponentRequestResponse"}}}}}}},"/v1/protocol_state":{"post":{"tags":["rpc"],"summary":"Retrieve protocol states","description":"This endpoint retrieves the state of protocols within a specific execution environment.","operationId":"protocol_state","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolStateRequestBody"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolStateRequestResponse"}}}}}}},"/v1/protocol_systems":{"post":{"tags":["rpc"],"summary":"Retrieve protocol systems","description":"This endpoint retrieves the protocol systems available in the indexer.","operationId":"protocol_systems","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolSystemsRequestBody"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolSystemsRequestResponse"}}}}}}},"/v1/tokens":{"post":{"tags":["rpc"],"summary":"Retrieve tokens","description":"This endpoint retrieves tokens for a specific execution environment, filtered by various\ncriteria. The tokens are returned in a paginated format.","operationId":"tokens","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensRequestBody"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensRequestResponse"}}}}}}}},"components":{"schemas":{"AccountUpdate":{"type":"object","required":["address","chain","slots","change"],"properties":{"address":{"type":"array","items":{"type":"string"}},"balance":{"type":"string","nullable":true},"chain":{"$ref":"#/components/schemas/Chain"},"change":{"$ref":"#/components/schemas/ChangeType"},"code":{"type":"string","nullable":true},"slots":{"type":"object","additionalProperties":{"type":"string"}}}},"BlockParam":{"type":"object","properties":{"chain":{"allOf":[{"$ref":"#/components/schemas/Chain"}],"nullable":true},"hash":{"type":"string","nullable":true},"number":{"type":"integer","format":"int64","nullable":true}},"additionalProperties":false},"Chain":{"type":"string","enum":["ethereum","starknet","zksync","arbitrum","base"]},"ChangeType":{"type":"string","enum":["Update","Deletion","Creation","Unspecified"]},"ContractId":{"type":"object","required":["address","chain"],"properties":{"address":{"type":"string"},"chain":{"$ref":"#/components/schemas/Chain"}},"additionalProperties":false},"Health":{"oneOf":[{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["Ready"]}}},{"type":"object","required":["status","message"],"properties":{"message":{"type":"string"},"status":{"type":"string","enum":["Starting"]}}},{"type":"object","required":["status","message"],"properties":{"message":{"type":"string"},"status":{"type":"string","enum":["NotReady"]}}}],"example":{"message":"No db connection","status":"NotReady"},"discriminator":{"propertyName":"status"}},"PaginationParams":{"type":"object","properties":{"page":{"type":"integer","format":"int64"},"page_size":{"type":"integer","format":"int64"}},"additionalProperties":false},"PaginationResponse":{"type":"object","required":["page","page_size","total"],"properties":{"page":{"type":"integer","format":"int64"},"page_size":{"type":"integer","format":"int64"},"total":{"type":"integer","format":"int64","description":"The total number of items available across all pages of results"}},"additionalProperties":false},"ProtocolComponent":{"type":"object","description":"Represents the static parts of a protocol component.","required":["id","protocol_system","protocol_type_name","chain","tokens","contract_ids","static_attributes","change","creation_tx","created_at"],"properties":{"chain":{"$ref":"#/components/schemas/Chain"},"change":{"$ref":"#/components/schemas/ChangeType"},"contract_ids":{"type":"array","items":{"type":"string"}},"created_at":{"type":"string","format":"date-time"},"creation_tx":{"type":"string"},"id":{"type":"string"},"protocol_system":{"type":"string"},"protocol_type_name":{"type":"string"},"static_attributes":{"type":"object","additionalProperties":{"type":"string"}},"tokens":{"type":"array","items":{"type":"string"}}}},"ProtocolComponentRequestResponse":{"type":"object","description":"Response from Tycho server for a protocol components request.","required":["protocol_components","pagination"],"properties":{"pagination":{"$ref":"#/components/schemas/PaginationResponse"},"protocol_components":{"type":"array","items":{"$ref":"#/components/schemas/ProtocolComponent"}}}},"ProtocolComponentsRequestBody":{"type":"object","required":["protocol_system"],"properties":{"chain":{"$ref":"#/components/schemas/Chain"},"component_ids":{"type":"array","items":{"type":"string"},"nullable":true},"pagination":{"$ref":"#/components/schemas/PaginationParams"},"protocol_system":{"type":"string"},"tvl_gt":{"type":"number","format":"double","description":"The minimum TVL of the protocol components to return, denoted in the chain's native token.","nullable":true}},"additionalProperties":false},"ProtocolId":{"type":"object","required":["id","chain"],"properties":{"chain":{"$ref":"#/components/schemas/Chain"},"id":{"type":"string"}},"additionalProperties":false,"deprecated":true},"ProtocolStateDelta":{"type":"object","description":"Represents a change in protocol state.","required":["component_id","updated_attributes","deleted_attributes"],"properties":{"component_id":{"type":"string"},"deleted_attributes":{"type":"array","items":{"type":"string"},"uniqueItems":true},"updated_attributes":{"type":"object","additionalProperties":{"type":"string"}}}},"ProtocolStateRequestBody":{"type":"object","required":["protocol_system"],"properties":{"chain":{"$ref":"#/components/schemas/Chain"},"include_balances":{"type":"boolean","description":"Whether to include account balances in the response. Defaults to true."},"pagination":{"$ref":"#/components/schemas/PaginationParams"},"protocol_ids":{"type":"array","items":{"type":"string"},"nullable":true},"protocol_system":{"type":"string"},"version":{"$ref":"#/components/schemas/VersionParam"}},"additionalProperties":false},"ProtocolStateRequestResponse":{"type":"object","required":["states","pagination"],"properties":{"pagination":{"$ref":"#/components/schemas/PaginationResponse"},"states":{"type":"array","items":{"$ref":"#/components/schemas/ResponseProtocolState"}}}},"ProtocolSystemsRequestBody":{"type":"object","properties":{"chain":{"$ref":"#/components/schemas/Chain"},"pagination":{"$ref":"#/components/schemas/PaginationParams"}},"additionalProperties":false},"ProtocolSystemsRequestResponse":{"type":"object","required":["protocol_systems","pagination"],"properties":{"pagination":{"$ref":"#/components/schemas/PaginationResponse"},"protocol_systems":{"type":"array","items":{"type":"string"}}}},"ResponseAccount":{"type":"object","description":"Account struct for the response from Tycho server for a contract state request.\n\nCode is serialized as a hex string instead of a list of bytes.","required":["chain","address","title","slots","native_balance","code","code_hash","balance_modify_tx","code_modify_tx","creation_tx"],"properties":{"address":{"type":"string","example":"0xc9f2e6ea1637E499406986ac50ddC92401ce1f58"},"balance_modify_tx":{"type":"object","additionalProperties":{"type":"string"},"example":"0x8f1133bfb054a23aedfe5d25b1d81b96195396d8b88bd5d4bcf865fc1ae2c3f4"},"chain":{"$ref":"#/components/schemas/Chain"},"code":{"type":"object","additionalProperties":{"type":"string"},"example":"0xBADBABE"},"code_hash":{"type":"object","additionalProperties":{"type":"string"},"example":"0x123456789"},"code_modify_tx":{"type":"object","additionalProperties":{"type":"string"},"example":"0x8f1133bfb054a23aedfe5d25b1d81b96195396d8b88bd5d4bcf865fc1ae2c3f4"},"creation_tx":{"type":"object","additionalProperties":{"type":"string"},"example":"0x8f1133bfb054a23aedfe5d25b1d81b96195396d8b88bd5d4bcf865fc1ae2c3f4"},"native_balance":{"type":"object","additionalProperties":{"type":"string"},"example":"0x00"},"slots":{"type":"object","additionalProperties":{"type":"string"},"example":{"0x....":"0x...."}},"title":{"type":"string","example":"Protocol Vault"}}},"ResponseProtocolState":{"type":"object","description":"Protocol State struct for the response from Tycho server for a protocol state request.","required":["component_id","attributes","balances"],"properties":{"attributes":{"type":"object","description":"Attributes of the component. If an attribute's value is a `bigint`,\nit will be encoded as a big endian signed hex string.","additionalProperties":{"type":"string"}},"balances":{"type":"object","additionalProperties":{"type":"string"}},"component_id":{"type":"string"}}},"ResponseToken":{"type":"object","description":"Token struct for the response from Tycho server for a tokens request.","required":["chain","address","symbol","decimals","tax","gas","quality"],"properties":{"address":{"type":"string","example":"0xc9f2e6ea1637E499406986ac50ddC92401ce1f58"},"chain":{"$ref":"#/components/schemas/Chain"},"decimals":{"type":"integer","format":"int32","minimum":0},"gas":{"type":"array","items":{"type":"integer","format":"int64","nullable":true,"minimum":0}},"quality":{"type":"integer","format":"int32","minimum":0},"symbol":{"type":"string","example":"WETH"},"tax":{"type":"integer","format":"int64","minimum":0}}},"StateRequestBody":{"type":"object","properties":{"chain":{"$ref":"#/components/schemas/Chain"},"contract_ids":{"type":"array","items":{"type":"string"},"nullable":true},"pagination":{"$ref":"#/components/schemas/PaginationParams"},"protocol_system":{"type":"string"},"version":{"$ref":"#/components/schemas/VersionParam"}},"additionalProperties":false},"StateRequestResponse":{"type":"object","description":"Response from Tycho server for a contract state request.","required":["accounts","pagination"],"properties":{"accounts":{"type":"array","items":{"$ref":"#/components/schemas/ResponseAccount"}},"pagination":{"$ref":"#/components/schemas/PaginationResponse"}}},"TokensRequestBody":{"type":"object","properties":{"chain":{"$ref":"#/components/schemas/Chain"},"min_quality":{"type":"integer","format":"int32","description":"Quality is between 0-100, where:\n- 100: Normal token\n- 75: Rebase token\n- 50: Fee token\n- 10: Token analysis failed at creation\n- 5: Token analysis failed on cronjob (after creation).\n- 0: Failed to extract decimals onchain","nullable":true},"pagination":{"$ref":"#/components/schemas/PaginationParams"},"token_addresses":{"type":"array","items":{"type":"string"},"nullable":true},"traded_n_days_ago":{"type":"integer","format":"int64","nullable":true,"minimum":0}},"additionalProperties":false},"TokensRequestResponse":{"type":"object","description":"Response from Tycho server for a tokens request.","required":["tokens","pagination"],"properties":{"pagination":{"$ref":"#/components/schemas/PaginationResponse"},"tokens":{"type":"array","items":{"$ref":"#/components/schemas/ResponseToken"}}}},"VersionParam":{"type":"object","description":"The version of the requested state, given as either a timestamp or a block.\n\nIf block is provided, the state at that exact block is returned. Will error if the block\nhas not been processed yet. If timestamp is provided, the state at the latest block before\nthat timestamp is returned.\nDefaults to the current time.","properties":{"block":{"allOf":[{"$ref":"#/components/schemas/BlockParam"}],"nullable":true},"timestamp":{"type":"string","format":"date-time","nullable":true}},"additionalProperties":false}}}}